# Настройка OAuth авторизации

## ВКонтакте

### 1. Создание приложения
1. Перейдите на https://vk.com/dev
2. Нажмите "Создать приложение"
3. Выберите "Веб-сайт"
4. Заполните форму:
   - Название: Road Fighters
   - Платформа: Веб-сайт
   - Адрес сайта: http://localhost:5000 (для разработки)
   - Базовый домен: localhost

### 2. Получение ключей
После создания приложения вы получите:
- **ID приложения** (Client ID)
- **Защищенный ключ** (Client Secret)

### 3. Настройка callback URL
В настройках приложения добавьте:
```
http://localhost:5000/auth/vk/callback
```

## Яндекс

### 1. Создание приложения
1. Перейдите на https://oauth.yandex.ru/client/new
2. Заполните форму:
   - Название: Road Fighters
   - Платформа: Веб-сервисы
   - Callback URL: http://localhost:5000/auth/yandex/callback

### 2. Получение ключей
После создания приложения вы получите:
- **ID приложения** (Client ID)
- **Пароль** (Client Secret)

## Настройка переменных окружения

Добавьте в файл `.env`:

```env
# ВКонтакте OAuth
VK_CLIENT_ID=ваш_vk_client_id
VK_CLIENT_SECRET=ваш_vk_client_secret

# Яндекс OAuth
YANDEX_CLIENT_ID=ваш_yandex_client_id
YANDEX_CLIENT_SECRET=ваш_yandex_client_secret
```

## Для продакшена

При развертывании на сервере:

1. Измените callback URL на ваш домен:
   - ВКонтакте: `https://ваш-домен.com/auth/vk/callback`
   - Яндекс: `https://ваш-домен.com/auth/yandex/callback`

2. Обновите переменные окружения на сервере

## Проверка работы

1. Запустите приложение
2. Перейдите на страницу входа или регистрации
3. Нажмите на кнопку "ВКонтакте" или "Яндекс"
4. Авторизуйтесь через соцсеть
5. Должны вернуться на сайт авторизованным

## Возможные проблемы

### Ошибка "redirect_uri_mismatch"
- Проверьте, что callback URL в настройках приложения точно совпадает с URL в коде

### Ошибка "invalid_client"
- Проверьте правильность Client ID и Client Secret

### Ошибка "access_denied"
- Пользователь отменил авторизацию

## Безопасность

- Никогда не коммитьте Client Secret в git
- Используйте HTTPS в продакшене
- Регулярно обновляйте ключи
- Ограничьте права приложения минимально необходимыми 